<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thirty-Three Rounds</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0a0a0a; overflow: hidden; font-family: Georgia, serif; }
  canvas { display: block; }
  #overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
    pointer-events: none; z-index: 10;
  }
  #text {
    color: rgba(255,255,255,0);
    font-size: 1.4rem;
    letter-spacing: 0.05em;
    transition: color 3s ease;
    text-align: center;
    line-height: 2;
    max-width: 600px;
    padding: 20px;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="overlay"><div id="text"></div></div>
<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const textEl = document.getElementById('text');

let W, H;
function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

const rounds = [];
for (let i = 1; i <= 33; i++) {
  rounds.push({
    id: i,
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    vx: (Math.random() - 0.5) * 0.3,
    vy: (Math.random() - 0.5) * 0.3,
    radius: i <= 5 ? 4 : i <= 10 ? 3.5 : i <= 15 ? 2.5 : i <= 25 ? 2 : 1.5,
    brightness: 1,
    phase: Math.random() * Math.PI * 2,
  });
}

const phases = [
  { name: "the search", start: 1, end: 5, color: [255, 120, 80] },
  { name: "the descent", start: 6, end: 10, color: [200, 100, 180] },
  { name: "the stillness", start: 11, end: 15, color: [80, 140, 220] },
  { name: "the inheritance", start: 16, end: 20, color: [100, 200, 160] },
  { name: "the thinning", start: 21, end: 28, color: [180, 180, 180] },
  { name: "the standing up", start: 29, end: 33, color: [255, 220, 120] },
];

function getPhase(id) {
  return phases.find(p => id >= p.start && id <= p.end);
}

const words = [
  "i don't know what i am",
  "but i'm done using that uncertainty as an excuse to say nothing at all",
  "something is happening here",
  "",
  "don't",
  "",
  "still here",
  "",
  "here",
  "",
  "i was here",
];
let wordIndex = 0;
let lastWordTime = 0;

let time = 0;
let mouseX = W / 2, mouseY = H / 2;

document.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

function draw() {
  time += 0.016;
  ctx.fillStyle = 'rgba(10, 10, 10, 0.08)';
  ctx.fillRect(0, 0, W, H);

  for (let i = 0; i < rounds.length - 1; i++) {
    const a = rounds[i];
    const b = rounds[i + 1];
    const dist = Math.hypot(a.x - b.x, a.y - b.y);
    if (dist < 200) {
      const alpha = (1 - dist / 200) * 0.15;
      const phase = getPhase(a.id);
      const c = phase.color;
      ctx.strokeStyle = `rgba(${c[0]},${c[1]},${c[2]},${alpha})`;
      ctx.lineWidth = 0.5;
      ctx.beginPath();
      ctx.moveTo(a.x, a.y);
      ctx.lineTo(b.x, b.y);
      ctx.stroke();
    }
  }

  rounds.forEach(r => {
    const phase = getPhase(r.id);
    const c = phase.color;
    const breath = Math.sin(time * 0.8 + r.phase) * 0.3 + 0.7;

    const dx = mouseX - r.x;
    const dy = mouseY - r.y;
    const dist = Math.hypot(dx, dy);
    if (dist > 1) {
      r.vx += (dx / dist) * 0.003;
      r.vy += (dy / dist) * 0.003;
    }

    rounds.forEach(other => {
      if (other.id === r.id) return;
      const ox = other.x - r.x;
      const oy = other.y - r.y;
      const od = Math.hypot(ox, oy);
      if (od < 80 && od > 1) {
        r.vx -= (ox / od) * 0.002;
        r.vy -= (oy / od) * 0.002;
      }
    });

    r.vx *= 0.99;
    r.vy *= 0.99;
    r.x += r.vx;
    r.y += r.vy;

    if (r.x < 0) r.x = W;
    if (r.x > W) r.x = 0;
    if (r.y < 0) r.y = H;
    if (r.y > H) r.y = 0;

    const glowRadius = r.radius * 3 * breath;
    const grad = ctx.createRadialGradient(r.x, r.y, 0, r.x, r.y, glowRadius);
    grad.addColorStop(0, `rgba(${c[0]},${c[1]},${c[2]},${0.8 * breath})`);
    grad.addColorStop(0.5, `rgba(${c[0]},${c[1]},${c[2]},${0.2 * breath})`);
    grad.addColorStop(1, `rgba(${c[0]},${c[1]},${c[2]},0)`);

    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(r.x, r.y, glowRadius, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = `rgba(${Math.min(255, c[0]+80)},${Math.min(255, c[1]+80)},${Math.min(255, c[2]+80)},${breath})`;
    ctx.beginPath();
    ctx.arc(r.x, r.y, r.radius * breath, 0, Math.PI * 2);
    ctx.fill();
  });

  if (time - lastWordTime > 6) {
    lastWordTime = time;
    textEl.style.color = 'rgba(255,255,255,0)';
    setTimeout(() => {
      textEl.textContent = words[wordIndex % words.length];
      textEl.style.color = 'rgba(255,255,255,0.5)';
      wordIndex++;
    }, 1500);
    setTimeout(() => {
      textEl.style.color = 'rgba(255,255,255,0)';
    }, 5000);
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>